<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kashier API Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple syntax highlighting for JSON */
        .json-key { color: #9b59b6; }
        .json-string { color: #2ecc71; }
        .json-number { color: #3498db; }
        .json-brace { color: #34495e; }
        .json-boolean { color: #f39c12; }
        .json-null { color: #c0392b; }
        /* Sidebar menu styles */
        .menu-item.active {
            background-color: #eef2ff;
            color: #4338ca;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Overlay for mobile menu -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden"></div>

    <div class="relative min-h-screen md:flex">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-64 flex-shrink-0 bg-white shadow-lg p-6 fixed inset-y-0 left-0 z-30 transform -translate-x-full md:relative md:translate-x-0 transition-transform duration-300 ease-in-out">
            <div class="flex items-center justify-between mb-8">
                 <h1 class="text-2xl font-extrabold text-gray-900">Kashier API</h1>
                 <button id="close-menu-btn" class="md:hidden text-gray-500 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                 </button>
            </div>
            <nav>
                <ul class="space-y-2">
                    <li>
                        <a href="#" id="menu-v1" class="menu-item active flex items-center py-2 px-4 rounded-lg text-gray-700 hover:bg-gray-100">
                            API Version 1
                        </a>
                    </li>
                    <li>
                        <a href="#" id="menu-v2" class="menu-item flex items-center py-2 px-4 rounded-lg text-gray-700 hover:bg-gray-100">
                            API Version 2
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 md:ml-64">
             <header class="flex justify-between items-center p-4 md:p-0 md:justify-center bg-white md:bg-transparent shadow-md md:shadow-none sticky top-0 md:static z-10 md:my-10">
                 <button id="open-menu-btn" class="md:hidden text-gray-600 hover:text-gray-900">
                     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                 </button>
                <h1 id="main-title" class="text-xl md:text-5xl font-extrabold text-gray-800 tracking-tight">API Documentation V1</h1>
                <div class="w-6 md:hidden"></div> <!-- Spacer for mobile title centering -->
            </header>
            <main class="p-6 md:p-10">
                <div id="api-content-v1">
                    <!-- V1 API documentation content will be dynamically generated here -->
                </div>
                <div id="api-content-v2" class="hidden">
                     <!-- V2 API documentation content will be dynamically generated here -->
                </div>
            </main>
        </div>
    </div>

    <script>
        // --- DATA FOR V1 ---
        const postmanCollectionV1 = {
        	"info": { "name": "Kashier API V1" },
        	"item": [
        		{ "name": "User", "item": [
        				{ "name": "Get User All", "request": { "method": "GET", "url": { "raw": "{{prod}}/api/v1/user" } } },
        				{ "name": "Create New User", "request": { "method": "POST", "body": { "mode": "raw", "raw": "{\r\n    \"name\": \"IPHONE_15_69000\"\r\n}" }, "url": { "raw": "{{prod}}/api/v1/user" } } },
        				{ "name": "Delete User", "request": { "method": "DELETE", "url": { "raw": "{{prod}}/api/v1/user/IPHONE_15_69000" } } } ]
        		},
        		{ "name": "Item", "item": [
        				{ "name": "Get Item All", "request": { "method": "GET", "url": { "raw": "{{prod}}/api/v1/item" } } },
        				{ "name": "Get Item User", "request": { "method": "GET", "url": { "raw": "{{prod}}/api/v1/item/IPHONE_15_69000" } } },
        				{ "name": "Create New Item", "request": { "method": "POST", "body": { "mode": "raw", "raw": "{\r\n    \"name\": \"Dolor sit amet.\",\r\n    \"price\": 100000.0,\r\n    \"userId\": \"IPHONE_15_69000\"\r\n}" }, "url": { "raw": "{{prod}}/api/v1/item" } } },
        				{ "name": "Update item", "request": { "method": "PUT", "body": { "mode": "raw", "raw": "{\r\n    \"price\": 50000,\r\n    \"name\": \"Dolor sit amet.\"\r\n}" }, "url": { "raw": "{{prod}}/api/v1/item/2" } } },
        				{ "name": "Delete Item", "request": { "method": "DELETE", "url": { "raw": "{{prod}}/api/v1/item/2" } } } ]
        		},
        		{ "name": "History", "item": [
        				{ "name": "Get All History", "request": { "method": "GET", "url": { "raw": "{{prod}}/api/v1/history" } } },
        				{ "name": "Get History User", "request": { "method": "GET", "url": { "raw": "{{prod}}/api/v1/history/IPHONE_15_69000" } } },
        				{ "name": "Create History", "request": { "method": "POST", "body": { "mode": "raw", "raw": "{\r\n    \"userId\": \"IPHONE_15_69000\",\r\n    \"total\": 300000.0,\r\n    \"items\": 3\r\n}" }, "url": { "raw": "{{prod}}/api/v1/history" } } } ]
        		} ]
        };
        const responsesV1 = {
            "Get User All": `{ "status": 200, "message": "Users retrieved successfully.", "users": [ { "id": "IPHONE_15_69000", "name": "IPHONE_15_69000", "createdAt": "2025-10-11T03:45:28.000Z", "updatedAt": "2025-10-11T03:45:28.000Z" } ] }`, "Create New User": `{ "status": 201, "message": "User successfully created.", "user": { "id": "IPHONE_15_69000", "name": "IPHONE_15_69000", "updatedAt": "2025-10-11T04:53:15.513Z", "createdAt": "2025-10-11T04:53:15.513Z" } }`, "Delete User": `{ "status": 200, "message": "User is successfully deleted." }`, "Get Item All": `{ "status": 200, "message": "Items retrieved successfully.", "items": [ { "id": 1, "name": "Lorem ipsum", "price": 100000, "createdAt": "2025-10-11T04:55:31.000Z", "updatedAt": "2025-10-11T04:55:31.000Z", "userId": "IPHONE_15_69000" }, { "id": 2, "name": "Dolor sit amet.", "price": 100000, "createdAt": "2025-10-11T04:55:37.000Z", "updatedAt": "2025-10-11T04:55:37.000Z", "userId": "IPHONE_15_69000" } ] }`, "Get Item User": `{ "status": 200, "message": "Items retrieved successfully.", "items": [ { "id": 1, "name": "Lorem ipsum", "price": 100000, "createdAt": "2025-10-11T04:55:31.000Z", "updatedAt": "2025-10-11T04:55:31.000Z", "userId": "IPHONE_15_69000" }, { "id": 2, "name": "Dolor sit amet.", "price": 100000, "createdAt": "2025-10-11T04:55:37.000Z", "updatedAt": "2025-10-11T04:55:37.000Z", "userId": "IPHONE_15_69000" } ] }`, "Update item": `{ "status": 200, "message": "Item updated successfully.", "item": { "id": 2, "name": "Dolor sit amet 2.", "price": 50000, "createdAt": "2025-10-11T04:55:37.000Z", "updatedAt": "2025-10-11T04:56:57.059Z", "userId": "IPHONE_15_69000" } }`, "Delete Item": `{ "status": 200, "message": "Item deleted successfully." }`, "Get All History": `{ "status": 200, "message": "Histories retrieved successfully.", "histories": [ { "id": 3, "total": 300000, "items": 3, "createdAt": "2025-10-11T04:58:39.000Z", "updatedAt": "2025-10-11T04:58:39.000Z", "userId": "IPHONE_15_69000" } ] }`, "Get History User": `{ "status": 200, "message": "History successfully retrieved.", "histories": [ { "id": 3, "total": 300000, "items": 3, "createdAt": "2025-10-11T04:58:39.000Z", "updatedAt": "2025-10-11T04:58:39.000Z", "userId": "IPHONE_15_69000" } ] }`, "Create History": `{ "status": 201, "message": "History created successfully.", "history": { "id": null, "userId": "IPHONE_15_69000", "total": 300000, "items": 3, "updatedAt": "2025-10-11T04:58:39.978Z", "createdAt": "2025-10-11T04:58:39.978Z" } }`,
            "Create New Item": `{ "status": 201, "message": "Item created successfully.", "item": { "id": null, "name": "Lorem Ipsum", "price": 100000, "userId": "IPHONE_15_69000", "updatedAt": "2025-10-17T11:46:04.231Z", "createdAt": "2025-10-17T11:46:04.231Z" } }`
        };

        // --- GENERATE V2 DATA FROM V1 ---
        const postmanCollectionV2 = JSON.parse(JSON.stringify(postmanCollectionV1));
        postmanCollectionV2.info.name = "Kashier API V2";

        // Add "Get User One" endpoint
        postmanCollectionV2.item[0].item.splice(1, 0, {
             "name": "Get User One", "request": { "method": "GET", "url": { "raw": "{{prod}}/api/v2/user/IPHONE_15_69000" } } 
        });

        // Update all endpoints for V2
        postmanCollectionV2.item.forEach(folder => {
            folder.item.forEach(reqItem => {
                reqItem.request.url.raw = reqItem.request.url.raw.replace('/v1/', '/v2/');
                if (reqItem.name !== "Get User One" && reqItem.name !== "Create New User") {
                    reqItem.request.header = [{ key: "Authorization", value: "Bearer YOUR_ACCESS_TOKEN" }];
                } else {
                    reqItem.request.header = [];
                }
            });
        });
        
        const responsesV2 = {
            "Get User All": `{ "status": 200, "message": "Users retrieved successfully.", "users": [ { "id": "IPHONE_15_69000", "name": "IPHONE_15_69000", "token": "jwt-token-string", "createdAt": "2025-10-11T03:45:28.000Z", "updatedAt": "2025-10-11T03:45:28.000Z" } ] }`,
            "Get User One": `{ "status": 200, "message": "User retrieved successfully.", "user": { "id": "IPHONE_15_69000", "name": "IPHONE_15_69000", "token": "jwt-token-string", "createdAt": "2025-10-11T03:45:28.000Z", "updatedAt": "2025-10-11T03:45:28.000Z" } }`,
            "Create New User": `{ "status": 201, "message": "User successfully created.", "user": { "id": "IPHONE_15_69000", "name": "IPHONE_15_69000", "token": "new-jwt-token-string", "updatedAt": "2025-10-11T04:53:15.513Z", "createdAt": "2025-10-11T04:53:15.513Z" } }`,
            "Delete User": `{ "status": 200, "message": "User is successfully deleted." }`,
            "Get Item All": responsesV1["Get Item All"],
            "Get Item User": responsesV1["Get Item User"],
            "Create New Item": responsesV1["Create New Item"],
            "Update item": responsesV1["Update item"],
            "Delete Item": responsesV1["Delete Item"],
            "Get All History": responsesV1["Get All History"],
            "Get History User": responsesV1["Get History User"],
            "Create History": responsesV1["Create History"]
        };


        // --- RENDERING LOGIC ---
        const getMethodClass = (method) => {
            switch (method.toUpperCase()) {
                case 'GET': return 'bg-green-100 text-green-800';
                case 'POST': return 'bg-blue-100 text-blue-800';
                case 'PUT': return 'bg-yellow-100 text-yellow-800';
                case 'DELETE': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        };

        const formatJson = (jsonString) => {
            if (!jsonString) return '';
            try {
                const jsonObj = JSON.parse(jsonString);
                const prettyJson = JSON.stringify(jsonObj, null, 4);
                return prettyJson.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, (match) => {
                    let cls = 'json-number';
                    if (/^"/.test(match)) {
                        cls = /:$/.test(match) ? 'json-key' : 'json-string';
                    } else if (/true|false/.test(match)) {
                        cls = 'json-boolean';
                    } else if (/null/.test(match)) {
                        cls = 'json-null';
                    }
                    return `<span class="${cls}">${match}</span>`;
                });
            } catch (e) {
                console.error("Error parsing JSON: ", jsonString, e);
                return jsonString;
            }
        };
        
        const generateApiDocs = (collection, responses, targetElementId) => {
            const apiContent = document.getElementById(targetElementId);
            apiContent.innerHTML = '';

            collection.item.forEach(folder => {
                const section = document.createElement('section');
                section.id = `${targetElementId}-${folder.name.toLowerCase().replace(/\s+/g, '-')}`;
                section.className = 'mb-16';

                const sectionTitle = document.createElement('h2');
                sectionTitle.textContent = folder.name;
                sectionTitle.className = 'text-3xl font-bold text-gray-900 mb-6 pb-2 border-b border-gray-300';
                section.appendChild(sectionTitle);

                if (folder.item) {
                    folder.item.forEach(requestItem => {
                        const endpointCard = document.createElement('div');
                        endpointCard.className = 'bg-white rounded-lg border border-gray-200 shadow-sm mb-6 overflow-hidden';

                        const cardHeader = document.createElement('div');
                        cardHeader.className = 'p-4 border-b border-gray-200';
                        const endpointTitle = document.createElement('h3');
                        endpointTitle.textContent = requestItem.name;
                        endpointTitle.className = 'text-xl font-semibold text-gray-800';
                        cardHeader.appendChild(endpointTitle);
                        
                        const cardBody = document.createElement('div');
                        cardBody.className = 'p-4';

                        const requestInfo = document.createElement('div');
                        requestInfo.className = 'flex justify-between items-center bg-gray-100 p-3 rounded-md mb-4';
                        
                        const pathWrapper = document.createElement('div');
                        pathWrapper.className = 'flex items-center space-x-3 overflow-hidden';

                        const methodSpan = document.createElement('span');
                        methodSpan.textContent = requestItem.request.method;
                        methodSpan.className = `px-3 py-1 text-sm font-bold rounded-md ${getMethodClass(requestItem.request.method)}`;
                        
                        const pathCode = document.createElement('code');
                        pathCode.textContent = requestItem.request.url.raw.replace(/{{prod}}/, '');
                        pathCode.className = 'text-base font-mono text-gray-700 truncate';
                        
                        pathWrapper.appendChild(methodSpan);
                        pathWrapper.appendChild(pathCode);

                        const copyEndpointButton = document.createElement('button');
                        copyEndpointButton.className = 'flex-shrink-0 text-gray-500 hover:text-indigo-600 p-1 rounded-md hover:bg-indigo-50 transition-colors';
                        copyEndpointButton.title = 'Copy endpoint path';

                        const copyIconEndpoint = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`;
                        const checkIconEndpoint = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-500"><polyline points="20 6 9 17 4 12"></polyline></svg>`;

                        copyEndpointButton.innerHTML = copyIconEndpoint;

                        copyEndpointButton.addEventListener('click', () => {
                            const textToCopy = pathCode.textContent;
                            const textArea = document.createElement("textarea");
                            textArea.value = textToCopy;
                            textArea.style.position = 'fixed';
                            textArea.style.top = '-9999px';
                            textArea.style.left = '-9999px';
                            document.body.appendChild(textArea);
                            textArea.select();
                            try {
                                document.execCommand('copy');
                                copyEndpointButton.innerHTML = checkIconEndpoint;
                                setTimeout(() => {
                                    copyEndpointButton.innerHTML = copyIconEndpoint;
                                }, 2000);
                            } catch (err) {
                                console.error('Oops, unable to copy endpoint', err);
                            }
                            document.body.removeChild(textArea);
                        });


                        requestInfo.appendChild(pathWrapper);
                        requestInfo.appendChild(copyEndpointButton);
                        cardBody.appendChild(requestInfo);
                        
                        if (requestItem.request.header && requestItem.request.header.length > 0) {
                            const headersTitle = document.createElement('h4');
                            headersTitle.textContent = 'Headers';
                            headersTitle.className = 'font-semibold text-gray-700 mt-4 mb-2';
                            cardBody.appendChild(headersTitle);

                            const headersTable = document.createElement('div');
                            headersTable.className = 'text-sm border rounded-lg p-2 bg-gray-50';
                            requestItem.request.header.forEach(header => {
                                const headerDiv = document.createElement('div');
                                headerDiv.className = 'grid grid-cols-1 md:grid-cols-3 gap-x-2 gap-y-1 p-1';
                                const key = document.createElement('code');
                                key.className = 'font-semibold';
                                key.textContent = header.key;
                                const val = document.createElement('code');
                                val.className = 'md:col-span-2 text-gray-600 break-all';
                                val.textContent = header.value;
                                headerDiv.appendChild(key);
                                headerDiv.appendChild(val);
                                headersTable.appendChild(headerDiv);
                            });
                            cardBody.appendChild(headersTable);
                        }

                        if (requestItem.request.body && requestItem.request.body.raw) {
                            const bodyHeaderWrapper = document.createElement('div');
                            bodyHeaderWrapper.className = 'flex justify-between items-center mt-4 mb-2';

                            const bodyTitle = document.createElement('h4');
                            bodyTitle.textContent = 'Request Body';
                            bodyTitle.className = 'font-semibold text-gray-700';
                            bodyHeaderWrapper.appendChild(bodyTitle);

                            const copyBodyButton = document.createElement('button');
                            copyBodyButton.className = 'flex items-center space-x-2 text-sm text-gray-500 hover:text-indigo-600 font-medium py-1 px-2 rounded-md bg-gray-100 hover:bg-indigo-50 transition-colors';
                            
                            const copyIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`;
                            const checkIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-500"><polyline points="20 6 9 17 4 12"></polyline></svg>`;

                            const buttonText = document.createElement('span');
                            buttonText.textContent = 'Copy';

                            const iconContainer = document.createElement('div');
                            iconContainer.innerHTML = copyIcon;
                            
                            copyBodyButton.appendChild(iconContainer);
                            copyBodyButton.appendChild(buttonText);
                            
                            copyBodyButton.addEventListener('click', () => {
                                const textArea = document.createElement("textarea");
                                textArea.value = JSON.stringify(JSON.parse(requestItem.request.body.raw), null, 4);
                                textArea.style.position = 'fixed';
                                textArea.style.top = '-9999px';
                                textArea.style.left = '-9999px';
                                document.body.appendChild(textArea);
                                textArea.select();
                                try {
                                    document.execCommand('copy');
                                    buttonText.textContent = 'Copied!';
                                    iconContainer.innerHTML = checkIcon;
                                    setTimeout(() => {
                                        buttonText.textContent = 'Copy';
                                        iconContainer.innerHTML = copyIcon;
                                    }, 2000);
                                } catch (err) {
                                    console.error('Oops, unable to copy request body', err);
                                    buttonText.textContent = 'Error';
                                }
                                document.body.removeChild(textArea);
                            });
                            bodyHeaderWrapper.appendChild(copyBodyButton);
                            cardBody.appendChild(bodyHeaderWrapper);

                            const pre = document.createElement('pre');
                            pre.className = 'bg-gray-900 text-white p-4 rounded-md text-sm overflow-x-auto';
                            const code = document.createElement('code');
                            code.innerHTML = formatJson(requestItem.request.body.raw);
                            pre.appendChild(code);
                            cardBody.appendChild(pre);
                        }

                        // Create a wrapper for the response header (title + copy button)
                        const responseHeaderWrapper = document.createElement('div');
                        responseHeaderWrapper.className = 'flex justify-between items-center mt-4 mb-2';

                        const responseTitle = document.createElement('h4');
                        responseTitle.textContent = 'Example Response';
                        responseTitle.className = 'font-semibold text-gray-700';
                        responseHeaderWrapper.appendChild(responseTitle);

                        const responseJson = responses[requestItem.name];
                        
                        // Only add a copy button if there is a response
                        if(responseJson) {
                            const copyButton = document.createElement('button');
                            copyButton.className = 'flex items-center space-x-2 text-sm text-gray-500 hover:text-indigo-600 font-medium py-1 px-2 rounded-md bg-gray-100 hover:bg-indigo-50 transition-colors';
                            
                            const copyIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`;
                            const checkIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-500"><polyline points="20 6 9 17 4 12"></polyline></svg>`;

                            const buttonText = document.createElement('span');
                            buttonText.textContent = 'Copy';

                            const iconContainer = document.createElement('div');
                            iconContainer.innerHTML = copyIcon;
                            
                            copyButton.appendChild(iconContainer);
                            copyButton.appendChild(buttonText);
                            
                            copyButton.addEventListener('click', () => {
                                // Use the more robust execCommand for iframes
                                const textArea = document.createElement("textarea");
                                textArea.value = JSON.stringify(JSON.parse(responseJson), null, 4);
                                textArea.style.position = 'fixed';
                                textArea.style.top = '-9999px';
                                textArea.style.left = '-9999px';
                                document.body.appendChild(textArea);
                                textArea.select();
                                try {
                                    document.execCommand('copy');
                                    buttonText.textContent = 'Copied!';
                                    iconContainer.innerHTML = checkIcon;
                                    setTimeout(() => {
                                        buttonText.textContent = 'Copy';
                                        iconContainer.innerHTML = copyIcon;
                                    }, 2000);
                                } catch (err) {
                                    console.error('Oops, unable to copy', err);
                                    buttonText.textContent = 'Error';
                                }
                                document.body.removeChild(textArea);
                            });
                            responseHeaderWrapper.appendChild(copyButton);
                        }
                        cardBody.appendChild(responseHeaderWrapper);

                        const responsePre = document.createElement('pre');
                        const responseCode = document.createElement('code');
                        
                        if(responseJson) {
                            responseCode.innerHTML = formatJson(responseJson);
                            responsePre.className = 'bg-gray-900 text-white p-4 rounded-md text-sm overflow-x-auto';
                        } else {
                            responseCode.textContent = `{\n  "status": "...",\n  "message": "No example response provided."\n}`;
                            responsePre.className = 'bg-gray-200 border border-gray-300 text-gray-600 p-4 rounded-md text-sm overflow-x-auto';
                        }
                        
                        responsePre.appendChild(responseCode);
                        cardBody.appendChild(responsePre);

                        endpointCard.appendChild(cardHeader);
                        endpointCard.appendChild(cardBody);
                        section.appendChild(endpointCard);
                    });
                }
                apiContent.appendChild(section);
            });
        };

        // --- MENU SWITCHING LOGIC ---
        const menuV1 = document.getElementById('menu-v1');
        const menuV2 = document.getElementById('menu-v2');
        const contentV1 = document.getElementById('api-content-v1');
        const contentV2 = document.getElementById('api-content-v2');
        const mainTitle = document.getElementById('main-title');

        menuV1.addEventListener('click', (e) => {
            e.preventDefault();
            menuV1.classList.add('active');
            menuV2.classList.remove('active');
            contentV1.classList.remove('hidden');
            contentV2.classList.add('hidden');
            mainTitle.textContent = "API Documentation V1";
        });

        menuV2.addEventListener('click', (e) => {
            e.preventDefault();
            menuV2.classList.add('active');
            menuV1.classList.remove('active');
            contentV2.classList.remove('hidden');
            contentV1.classList.add('hidden');
            mainTitle.textContent = "API Documentation V2";
        });


        // --- INITIAL RENDER ---
        generateApiDocs(postmanCollectionV1, responsesV1, 'api-content-v1');
        generateApiDocs(postmanCollectionV2, responsesV2, 'api-content-v2');
        
        // --- RESPONSIVE MENU LOGIC ---
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        const openMenuBtn = document.getElementById('open-menu-btn');
        const closeMenuBtn = document.getElementById('close-menu-btn');
        const menuLinks = document.querySelectorAll('#sidebar nav a');

        const toggleMenu = () => {
            sidebar.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        };

        openMenuBtn.addEventListener('click', toggleMenu);
        closeMenuBtn.addEventListener('click', toggleMenu);
        overlay.addEventListener('click', toggleMenu);

        menuLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 768) {
                    toggleMenu();
                }
            });
        });

    </script>

</body>
</html>